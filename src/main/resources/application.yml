# Spring Boot 설정
spring:
  # 애플리케이션 기본 정보
  application:
    name: nexus-backend  # 애플리케이션 이름

  profiles:
    active: dev  # 아무 설정 없이 실행하면 기본적으로 dev를 사용하겠다는 뜻

  # DB접속정보
  datasource:
    # 환경변수(SPRING_DATASOURCE_URL)가 있으면 그걸 쓰고, 없으면 기본값으로 도커 DB 이름을 사용함
    url: ${SPRING_DATASOURCE_URL:jdbc:postgresql://nexus-db:5432/nexus_prod}
    username: ${SPRING_DATASOURCE_USERNAME:nexus}
    password: ${SPRING_DATASOURCE_PASSWORD:nexus6993@@}
    driver-class-name: org.postgresql.Driver

  # JPA (Java Persistence API) 설정
  jpa:
    hibernate:
      ddl-auto: none
      show-sql: true # SQL 쿼리 로깅 활성화 (개발용)
    # Hibernate 추가 속성
    properties:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true      # 쿼리 로그 포맷 (정렬)
        show_sql: true        # 쿼리 로그 출력

# 서버 설정
server:
  port: 4000  # 웹 서버 포트

# Swagger UI 설정
springdoc:
  api-docs:
    path: /api-docs  # API 문서 JSON 경로
  swagger-ui:
    path: /swagger-ui.html  # Swagger UI 경로
    enabled: true  # Swagger UI 활성화
    operationsSorter: method  # API 정렬 방식
    tagsSorter: alpha  # 태그 정렬 방식

# 로깅 설정 (개발용 상세 로그)
logging:
  level:
    com.apr.backend: DEBUG                    # 우리 프로젝트 패키지 DEBUG 레벨
    org.springframework.web: DEBUG           # Spring Web DEBUG 레벨
    org.springframework.boot.autoconfigure: ERROR
    org.hibernate.SQL: DEBUG                 # Hibernate SQL 쿼리 로그
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE  # SQL 파라미터 바인딩 로그
    org.hibernate.orm.jdbc.bind: trace
